<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Result</title>
    <link rel="stylesheet" type="text/css" href="/css/hasil_sign.css">
</head>
<body>

    <script>
        function downloadQRCode() {
            // Get the QR Code data URL
            const qrCodeData = '<%- qrCodeData %>';

            // Create a temporary link element
            const link = document.createElement('a');
            link.href = qrCodeData;
            // Bersihkan nama file agar tidak ada karakter ilegal
            const noSurat = '<%- no_surat %>'.replace(/[\/\\:*?"<>|]/g, '');
            const namaLengkap = '<%- nama_lengkap %>'.replace(/[\/\\:*?"<>|]/g, '');
            const fileName = `${noSurat} - ${namaLengkap}.jpg`;
            link.download = fileName; // Set the default file name

            // Append the link to the document body (necessary for some browsers)
            document.body.appendChild(link);

            // Programmatically click the link to trigger the download
            link.click();

            // Remove the link from the document
            document.body.removeChild(link);
        }
    </script>

    
    <%- include('./layout/user_header.ejs') %>
    <div id="outer">
        <div id="all">
            <h1>Your QR Code</h1>
            <div id="containerText">
                <img src="<%- qrCodeData %>" alt="QR Code" width = 200px height = 200px>

                <button id="downloadButton" onclick="downloadQRCode()" > Download QR </button>

                
            </div>
        </div>
    </div>
</body>
</html>